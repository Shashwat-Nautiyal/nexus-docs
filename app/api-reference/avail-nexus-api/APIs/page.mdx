---
title: 'Avail Nexus SDK API Reference'
description: 'Complete API reference for the Avail Nexus SDK including initialization, network configuration, bridging, transfers, and utility functions'
image: '/img/docs-link-preview.png'
---

import { Callout, Steps, Tabs } from 'nextra/components'

# Avail Nexus SDK configuration & API reference

The Avail Nexus SDK provides a comprehensive set of APIs for cross-chain bridging, token transfers, and balance management across multiple EVM chains.

## Configuration options

### Network environment

```typescript showLineNumbers filename="Typescript"
import { Network } from '@avail/nexus-sdk';

// Available environments:
Network.FOLLY;  // Dev with testnet tokens
Network.CERISE; // Dev with mainnet tokens
```

<Callout type="info">
**Environment Selection Guide:**
- `FOLLY`: Development with testnet tokens (early development, testing with free tokens)
- `CERISE`: Development with mainnet tokens (development with real token prices/metadata)
</Callout>

### Supported chains


#### Mainnet Chains

| Network   | Chain ID | Native Currency | Block Time | Status |
|-----------|----------|----------------|------------|--------|
| Ethereum  | 1        | ETH            | 12s        | ✅     |
| Optimism  | 10       | ETH            | 2s         | ✅     |
| Polygon   | 137      | MATIC          | 2s         | ✅     |
| Arbitrum  | 42161    | ETH            | 1s         | ✅     |
| Avalanche | 43114    | AVAX           | 2s         | ✅     |
| Base      | 8453     | ETH            | 2s         | ✅     |
| Linea     | 59144    | ETH            | 12s        | ✅     |
| Scroll    | 534351   | ETH            | 3s         | ✅     |

#### Testnet Chains

| Network          | Chain ID  | Native Currency | Block Time | Status |
|------------------|-----------|----------------|------------|--------|
| Ethereum Sepolia | 11155111  | ETH            | 12s        | ✅     |
| Optimism Sepolia | 11155420  | ETH            | 2s         | ✅     |
| Polygon Amoy     | 80002     | MATIC          | 2s         | ✅     |
| Arbitrum Sepolia | 421614    | ETH            | 1s         | ✅     |
| Avalanche Fuji   | 43113     | AVAX           | 2s         | ✅     |
| Base Sepolia     | 84532     | ETH            | 2s         | ✅     |
| Linea Sepolia    | 59141     | ETH            | 12s        | ✅     |
| Scroll Sepolia   | 534352    | ETH            | 3s         | ✅     |

<details className="border p-3 rounded-md bg-[#EFF6FF]">
<summary>How to fetch supported chains from the SDK?</summary>

```typescript showLineNumbers filename="Typescript"
import { SUPPORTED_CHAINS } from '@avail/nexus-sdk';

// Mainnet Chain IDs
SUPPORTED_CHAINS.ETHEREUM;     // 1
SUPPORTED_CHAINS.OPTIMISM;     // 10
SUPPORTED_CHAINS.POLYGON;      // 137
SUPPORTED_CHAINS.ARBITRUM;     // 42161
SUPPORTED_CHAINS.AVALANCHE;    // 43114
SUPPORTED_CHAINS.BASE;         // 8453
SUPPORTED_CHAINS.LINEA;        // 59144
SUPPORTED_CHAINS.SCROLL;       // 534351

// Testnet Chain IDs
SUPPORTED_CHAINS.ETHEREUM_SEPOLIA;  // 11155111
SUPPORTED_CHAINS.OPTIMISM_SEPOLIA;  // 11155420
SUPPORTED_CHAINS.POLYGON_AMOY;      // 80002
SUPPORTED_CHAINS.ARBITRUM_SEPOLIA;  // 421614
SUPPORTED_CHAINS.AVALANCHE_FUJI;    // 43113
SUPPORTED_CHAINS.BASE_SEPOLIA;      // 84532
SUPPORTED_CHAINS.LINEA_SEPOLIA;     // 59141
SUPPORTED_CHAINS.SCROLL_SEPOLIA;    // 534352
```
</details>

### Supported Tokens

#### Mainnet Tokens

| Token | Name       | Decimals | Type    |
|-------|------------|----------|---------|
| ETH   | Ethereum   | 18       | Native  |
| USDC  | USD Coin   | 6        | ERC-20  |
| USDT  | Tether USD | 6        | ERC-20  |

#### Testnet Tokens

| Token | Name          | Decimals | Type    | Note        |
|-------|---------------|----------|---------|-------------|
| ETH   | Test Ethereum | 18       | Native  | Faucet ETH  |
| USDC  | Test USD Coin | 6        | ERC-20  | Test tokens |
| USDT  | Test Tether   | 6        | ERC-20  | Test tokens |

## Core API Methods

### Initialization

#### `initialize(provider: EthereumProvider): Promise<void>`

Initializes the SDK with a Web3/EVM provider. Must be called before any other method.

**Parameters:**
- `provider`: EthereumProvider - Web3 provider (e.g., window.ethereum)

**Example:**
```typescript showLineNumbers filename="Typescript"
// Basic initialization
await sdk.initialize(window.ethereum);

// With network configuration
const sdk = new NexusSDK({
  network: Network.CERISE, // Choose based on your needs
});
await sdk.initialize(window.ethereum);
```

#### `deinit(): Promise<void>`

Deinitializes the SDK and cleans up resources.

**Example:**
```typescript showLineNumbers filename="Typescript"
await sdk.deinit();
```

### Bridging Operations

#### `bridge(params: BridgeParams): Promise<void>`

Bridges tokens from the current chain to a target chain.

**Parameters:**
```typescript showLineNumbers filename="Typescript"
interface BridgeParams {
  token: string;    // Token symbol (e.g., 'USDC', 'ETH')
  amount: number | string; // Amount to bridge
  chainId: number;  // Target chain ID
}
```

**Example:**
```typescript showLineNumbers filename="Typescript"
// Bridge USDC to Polygon
await sdk.bridge({
  token: 'USDC',
  amount: 100,
  chainId: 137, // Polygon mainnet
});

// Bridge ETH to Base
await sdk.bridge({
  token: 'ETH',
  amount: '0.5',
  chainId: 8453, // Base
});
```

#### `transfer(params: TransferParams): Promise<void>`

Transfers tokens to a specific recipient on a target chain.

**Parameters:**
```typescript showLineNumbers filename="Typescript"
interface TransferParams {
  token: string;       // Token symbol
  amount: number | string; // Amount to transfer
  chainId: number;     // Target chain ID
  recipient: string;   // Recipient address
}
```

**Example:**
```typescript showLineNumbers filename="Typescript"
await sdk.transfer({
  token: 'ETH',
  amount: 1, // 1 ETH
  chainId: 1,
  recipient: '0x742d35Cc6634C0532925a3b8D4C9db96c4b4Db45',
});
```

### Balance Management

#### `getUnifiedBalances(): Promise<UnifiedBalanceResponse[]>`

Retrieves unified balances across all supported chains.

**Returns:** Array of unified balance objects containing balances across all chains.

**Example:**
```typescript showLineNumbers filename="Typescript"
const balances = await sdk.getUnifiedBalances();
console.log('All balances:', balances);
```

#### `getFormattedTokenBalance(token: string, chainId?: number): Promise<TokenBalance | null>`

Gets formatted balance for a specific token, optionally on a specific chain.

**Parameters:**
- `token`: string - Token symbol
- `chainId?`: number - Optional chain ID (if not provided, returns total across all chains)

**Returns:** TokenBalance object with formatted balance information.

**Example:**
```typescript showLineNumbers filename="Typescript"
// Get total USDC balance across all chains
const usdcBalance = await sdk.getFormattedTokenBalance('USDC');
console.log(`Total USDC: ${usdcBalance?.formattedBalance}`);

// Get USDC balance on Polygon
const polygonUSDC = await sdk.getFormattedTokenBalance('USDC', 137);
console.log(`Polygon USDC: ${polygonUSDC?.formattedBalance}`);
```

### Event Hooks

#### `setOnIntentHook(callback: IntentHookCallback): void`

Sets up a callback for handling bridge intents.

**Parameters:**
```typescript showLineNumbers filename="Typescript"
interface IntentHookCallback {
  (params: { intent: any; allow: () => void; deny: () => void }): void;
}
```

**Example:**
```typescript showLineNumbers filename="Typescript"
sdk.setOnIntentHook(({ intent, allow, deny }) => {
  // Show user the intent details and fees
  console.log('Intent:', intent);
  allow(); // User approves
});
```

#### `setOnAllowanceHook(callback: AllowanceHookCallback): void`

Sets up a callback for handling token allowances.

**Parameters:**
```typescript showLineNumbers filename="Typescript"
interface AllowanceHookCallback {
  (params: { sources: any[]; allow: (type: string[]) => void; deny: () => void }): Promise<void>;
}
```

**Example:**
```typescript showLineNumbers filename="Typescript"
sdk.setOnAllowanceHook(async ({ sources, allow, deny }) => {
  // Show user allowance requirements
  console.log('Allowances needed:', sources);
  allow(['min']); // Set min, max or custom allowances
});
```

## Utility Functions

### Balance Formatting

#### `formatBalance(balance: string, decimals: number, precision?: number): string`

Formats a balance with proper decimal places.

**Parameters:**
- `balance`: string - Raw balance value
- `decimals`: number - Token decimals
- `precision?`: number - Optional decimal precision

**Example:**
```typescript showLineNumbers filename="Typescript"
const formatted = sdk.formatBalance('1500000', 6, 2); // '1.50'
```

#### `parseUnits(value: string, decimals: number): bigint`

Converts a string value to wei/smallest unit.

**Example:**
```typescript showLineNumbers filename="Typescript"
const wei = sdk.parseUnits('1.5', 18); // 1500000000000000000n
```

#### `formatUnits(value: bigint, decimals: number): string`

Converts wei/smallest unit to readable format.

**Example:**
```typescript showLineNumbers filename="Typescript"
const eth = sdk.formatUnits(wei, 18); // '1.5'
```

### Address Utilities

#### `isValidAddress(address: string): boolean`

Validates if an address is a valid Ethereum address.

**Example:**
```typescript showLineNumbers filename="Typescript"
const isValid = sdk.isValidAddress('0x742d35Cc6634C0532925a3b8D4C9db96c4b4Db45'); // true
```

#### `truncateAddress(address: string, chars?: number): string`

Truncates an address for display purposes.

**Example:**
```typescript showLineNumbers filename="Typescript"
const short = sdk.truncateAddress('0x742d35Cc6634C0532925a3b8D4C9db96c4b4Db45'); // '0x742d...4Db45'
```

### Chain Utilities

#### `chainIdToHex(chainId: number): string`

Converts a chain ID to hexadecimal format.

**Example:**
```typescript showLineNumbers filename="Typescript"
const hex = sdk.chainIdToHex(137); // '0x89'
```

#### `hexToChainId(hex: string): number`

Converts a hexadecimal chain ID to decimal.

**Example:**
```typescript showLineNumbers filename="Typescript"
const decimal = sdk.hexToChainId('0x89'); // 137
```

### Metadata Functions

#### `getTokenMetadata(token: string): TokenMetadata | null`

Gets metadata for a token (defaults to mainnet).

#### `getMainnetTokenMetadata(token: string): TokenMetadata | null`

Gets mainnet token metadata.

#### `getTestnetTokenMetadata(token: string): TokenMetadata | null`

Gets testnet token metadata.

**Example:**
```typescript showLineNumbers filename="Typescript"
const mainnetUSDC = sdk.getMainnetTokenMetadata('USDC');
const testnetUSDC = sdk.getTestnetTokenMetadata('USDC');

console.log(mainnetUSDC.name); // "USD Coin"
console.log(testnetUSDC.name); // "Test USD Coin"
```

#### `getChainMetadata(chainId: number): ChainMetadata | null`

Gets metadata for a specific chain.

**Example:**
```typescript showLineNumbers filename="Typescript"
const chainMeta = sdk.getChainMetadata(1);
console.log(chainMeta.name); // "Ethereum"
```

#### `formatTokenAmount(amount: string, token: string): string`

Formats token amount using mainnet metadata.

#### `formatTestnetTokenAmount(amount: string, token: string): string`

Formats token amount using testnet metadata.

### Chain Type Utilities

#### `isMainnetChain(chainId: number): boolean`

Checks if a chain ID is a mainnet chain.

#### `isTestnetChain(chainId: number): boolean`

Checks if a chain ID is a testnet chain.

**Example:**
```typescript showLineNumbers filename="Typescript"
console.log(isMainnetChain(1)); // true
console.log(isTestnetChain(11155111)); // true (Ethereum Sepolia)
console.log(isMainnetChain(11155111)); // false
```


### Token Metadata

```typescript showLineNumbers filename="Typescript"
import { 
  TOKEN_METADATA, 
  TESTNET_TOKEN_METADATA 
} from '@avail/nexus-sdk';

// Mainnet tokens
console.log(TOKEN_METADATA.USDC); // { symbol: 'USDC', name: 'USD Coin', decimals: 6, ... }

// Testnet tokens
console.log(TESTNET_TOKEN_METADATA.USDC); // { symbol: 'USDC', name: 'Test USD Coin', decimals: 6, ... }
```

### Chain Arrays

```typescript showLineNumbers filename="Typescript"
import { 
  MAINNET_CHAINS, 
  TESTNET_CHAINS 
} from '@avail/nexus-sdk';

console.log(MAINNET_CHAINS); // [1, 10, 137, 42161, 43114, 8453, 59144, 534351]
console.log(TESTNET_CHAINS); // [11155111, 11155420, 80002, 421614, 43113, 84532, 59141, 534352]
```

## Error Handling

The SDK throws descriptive errors for various scenarios:

```typescript showLineNumbers filename="Typescript"
try {
  await sdk.bridge({
    token: 'INVALID_TOKEN',
    amount: 10,
    chainId: 137,
  });
} catch (error) {
  console.error(error.message); // "Unsupported token"
}
```

**Common error scenarios:**
- `"CA SDK not initialized. Call initialize() first."` - SDK not initialized
- `"Unsupported chain"` - Chain ID not supported
- `"Unsupported token"` - Token symbol not supported
- `"Provider is required"` - No provider passed to initialize
- `"Failed to initialize CA SDK"` - Provider initialization failed

## TypeScript Support

The SDK is fully typed with comprehensive TypeScript definitions:

```typescript showLineNumbers filename="Typescript"
import type {
  TokenMetadata,
  ChainMetadata,
  TokenBalance,
  BridgeParams,
  TransferParams,
} from '@avail/nexus-sdk';
```

## Complete Examples

### Bridge with Hooks Example

```typescript showLineNumbers filename="Typescript"
import { NexusSDK, SUPPORTED_CHAINS } from '@avail/nexus-sdk';

const sdk = new NexusSDK();

// Initialize
await sdk.initialize(window.ethereum);

// Set up hooks
sdk.setOnIntentHook(({ intent, allow, deny }) => {
  console.log('Intent:', intent);
  allow(); // User approves
});

sdk.setOnAllowanceHook(async ({ sources, allow, deny }) => {
  console.log('Allowances needed:', sources);
  allow(['min']); // Set min allowances
});

// Bridge USDC from Ethereum to Polygon
await sdk.bridge({
  token: 'USDC',
  amount: 100,
  chainId: SUPPORTED_CHAINS.POLYGON,
});
```

### Balance Management Example

```typescript showLineNumbers filename="Typescript"
// Get all balances
const allBalances = await sdk.getUnifiedBalances();

// Get specific token balance
const usdcBalance = await sdk.getFormattedTokenBalance('USDC');
console.log(`Total USDC: ${usdcBalance?.formattedBalance}`);

// Get token balance on specific chain
const polygonUSDC = await sdk.getFormattedTokenBalance('USDC', 137);
console.log(`Polygon USDC: ${polygonUSDC?.formattedBalance}`);

// Format balances manually
const formatted = sdk.formatBalance('1500000', 6, 2); // '1.50'
```

### Testnet Usage Example

```typescript showLineNumbers filename="Typescript"
import { NexusSDK, SUPPORTED_CHAINS, Network } from '@avail/nexus-sdk';

// Initialize for testnet development
const sdk = new NexusSDK({
  network: Network.FOLLY // Dev with testnet tokens
});
await sdk.initialize(provider);

// Bridge on testnet (same API as mainnet)
await sdk.bridge({
  token: 'USDC',
  amount: 10,
  chainId: SUPPORTED_CHAINS.POLYGON_AMOY, // Polygon testnet
});

// Check if chain is testnet
const isTestnet = sdk.isTestnetChain(SUPPORTED_CHAINS.ETHEREUM_SEPOLIA); // true
```

<Callout type="info">
The SDK provides the same API surface for both mainnet and testnet operations, making it easy to develop and test your applications across different environments.
</Callout>
